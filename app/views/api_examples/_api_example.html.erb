<% index = api_example_counter %>

<div class="content <%= index == 0 ? 'active' : '' %>" id="panel<%=index + 1 %>">
      <h3>Example <%= index + 1 %></h3>

      <p><%= api_example.description || 'No description given' %></p>

      <h4>Recorded at</h4>
      <p><%= api_example.recorded_at.strftime("%Y-%m-%d %H:%M:%S UTC") %></p>

      <h4><%= link_to 'Show cURL', curl_api_example_path(api_example.id), id: "show-curl-#{api_example.id}", remote: true%></h4>
      <div id="curl-<%=api_example.id%>">
      </div>

      <h4>Request URL</h4>
      <pre class="panel">
<%= api_example.http_method %> <%= api_example.url -%>
      </pre>

      <% if api_example.query.present? %>
      <h4>Query Parameters</h4>
      <pre class="panel">
<% api_example.query.each_pair do |key, value| %>
<%= key %>: <%= value %>
<% end -%>
      </pre>
      <% end %>

      <h4> Request Headers</h4>
      <pre class="panel">
<% api_example.request_headers.each_pair do |key, value| %>
<%= key %>: <%= value %>
<% end %>
      </pre>

      <% if api_example.request_body.present? %>
      <h4> Request Body</h4>
      <pre class="panel">
<%= api_example.request_body %>
      </pre>
      <% end %>

      <h4> Response Headers</h4>
      <pre class="panel">
<% api_example.response_headers.each_pair do |key, value| %>
<%= key %>: <%= value %>
<% end %>
      </pre>

      <% if api_example.response_body %>
      <h4> Response Body</h4>
      <p class="info label"> Shortened for readability </p>
      <pre class="panel">
<%= JSON.pretty_generate(JSON.parse(api_example.stripped_response_body)) %>
      </pre>
      <% end %>
    </div>